<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <title>Morse Cat</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" >
        <link rel="icon" href="cat.svg" />
    </head>
<script src="./morsePlayer.js"></script>
<script src="./morseKeyer.js"></script>
<script>
const keyer = new MorseKeyer({
    wpm: 30,
    elementCallback: console.log,
    characterCallback: console.log,
    wordCallback: console.log,
});

function onKeyDown(event) {
    if (event.code == "Space") {
        keyer.pressStraightKey();
    } else if (event.code == "ControlLeft") {
        keyer.pressDitKey();
    } else if (event.code == "ControlRight") {
        keyer.pressDahKey();
    }
}

function onKeyUp(event) {
    if (event.code == "Space") {
        keyer.releaseStraightKey();
    } else if (event.code == "ControlLeft") {
        keyer.releaseDitKey();
    } else if (event.code == "ControlRight") {
        keyer.releaseDahKey();
    }
}

function onBlur(event) {
    keyer.releaseDitKey();
    keyer.releaseDahKey();
    keyer.releaseStraightKey();
}

document.addEventListener('blur', onBlur);
document.addEventListener('keydown', onKeyDown);
document.addEventListener('keyup', onKeyUp);

</script>
